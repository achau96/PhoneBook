{"version":3,"sources":["components/Filter.js","services/persons.js","components/Persons.js","components/PersonForm.js","App.js","index.js"],"names":["Filter","props","onChange","handleFiltChange","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Button","onClick","handleClick","Persons","persons","filter","name","toLowerCase","includes","filt","map","key","number","window","confirm","personsService","setPersons","n","catch","error","alert","PersonForm","setError","setMessage","setNewNum","newName","newNum","handleNameChange","handleNumChange","setNewName","useState","setID","useEffect","nameObject","updatedPersons","setTimeout","console","log","onSubmit","event","exists","preventDefault","forEach","returnedPerson","concat","value","type","Notification","message","className","App","setNewFilt","personList","length","target","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.57a8d54a.chunk.js","sourcesContent":["import React from 'react' \r\n\r\nconst Filter = (props) => {\r\n    return(\r\n    <div>filter shown with <input onChange = {props.handleFiltChange}/></div>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleteID = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update, deleteID }","import React from 'react' \r\nimport personsService from '../services/persons'\r\n\r\nconst Button = (props) => (\r\n    <button onClick = {props.handleClick}> delete </button>\r\n  )\r\nconst Persons = (props) => {\r\n    const filteredName = props.persons.filter(persons => persons.name.toLowerCase().includes(props.filt.toLowerCase()))\r\n    return(\r\n        filteredName.map(persons =>\r\n            <div key = {persons.name}>\r\n                {persons.name} {persons.number} \r\n                <Button handleClick = {() => \r\n                (window.confirm(`Delete ${persons.name}?`)) ?\r\n                    personsService\r\n                        .deleteID(persons.id)\r\n                            .then(() => props.setPersons(props.persons.filter(n => n.id !== persons.id)))\r\n                        .catch(error =>{\r\n                            alert(`the person '${persons.name}' was already removed`)\r\n                            props.setPersons(props.persons.filter(n => n.id !== persons.id))\r\n                        })\r\n                            : null\r\n                        }/>\r\n            </div>\r\n    ))\r\n}\r\n\r\nexport default Persons","import React, {useState, useEffect} from 'react' \r\nimport personsService from '../services/persons'\r\n\r\n\r\nconst PersonForm = ({setError, setMessage, setNewNum, newName, newNum, handleNameChange, handleNumChange, setPersons, persons, setNewName}) => {\r\n  const [id, setID] = useState(null) \r\n\r\n  const changeID = () => {\r\n  persons.forEach((persons) => persons.name === newName ? (setID(persons.id)): null)\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(id!==null){\r\n    personsService\r\n    .update((id),nameObject)\r\n    .then(updatedPersons =>{\r\n      setPersons(persons.map(persons => persons.name !== newName ? persons: updatedPersons))})\r\n      .catch(error =>{\r\n        setError(true)\r\n        setMessage(`${nameObject.name} has already been deleted from server`)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n          setError(false)\r\n        }, 2000)\r\n      })\r\n    setMessage(`Changed ${nameObject.name}'s number to ${nameObject.number}`)\r\n    setID(null)\r\n    setTimeout(() => {\r\n      setMessage(null)\r\n    }, 2000)}\r\n      else {\r\n        console.log('null, do not run')\r\n      }\r\n  },[id]\r\n  )\r\n\r\n  const nameObject = {\r\n    name: newName,\r\n    number: newNum\r\n  }\r\n\r\n  const addName = (event) => {\r\n  \r\n        var exists = false\r\n        event.preventDefault()\r\n        persons.forEach((persons) => persons.name === newName ? \r\n        exists = true : null)\r\n        \r\n       \r\n        if(exists === false){\r\n        personsService\r\n          .create(nameObject)\r\n            .then(returnedPerson => {\r\n              setPersons(persons.concat(returnedPerson))\r\n              setNewName('')\r\n              setNewNum('')\r\n              setMessage(`Added ${nameObject.name}`)\r\n              setTimeout(() => {\r\n                setMessage(null)\r\n              }, 5000)\r\n              exists = false  \r\n            })\r\n        \r\n      }\r\n      else if (window.confirm(`${newName} is already added to phonebook, replace old number with a new one?`)){\r\n        changeID()\r\n        console.log(nameObject.name)\r\n    }}\r\n\r\n    return(\r\n        <form onSubmit = {addName}>\r\n        <div>\r\n          name: <input \r\n          value = {newName}\r\n          onChange = {handleNameChange}/>\r\n        </div>\r\n        <div>\r\n          number: <input \r\n          value = {newNum}\r\n          onChange = {handleNumChange}/>\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    )\r\n}\r\nexport default PersonForm","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport personsService from './services/persons'\n\nconst Notification = ({ message,error }) => {\n  if (message === null) {\n    return null\n  }\n  if(error === false)\n  return (\n    <div className=\"addName\">\n      {message}\n    </div>\n  )\n  else return(\n    <div className=\"error\">\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNum, setNewNum ] = useState('')\n  const [ filt, setNewFilt] = useState('')\n  const [ message, setMessage] = useState(null)\n  const [ error, setError] = useState(false)\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(personList => \n        setPersons(personList))\n\n  }, [])\n  \n  console.log('render', persons.length, 'persons')\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumChange = (event) => {\n    setNewNum(event.target.value)\n  }\n\n  const handleFiltChange = (event) => {\n    setNewFilt(event.target.value)\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message = {message} error = {error}/>\n      <Filter handleFiltChange = {handleFiltChange}/>\n      <h2>add a new</h2>\n      <PersonForm setError = {setError} setMessage = {setMessage} message = {message} handleNameChange = {handleNameChange} handleNumChange = {handleNumChange}\n      newName = {newName} newNum = {newNum} persons = {persons} setPersons = {setPersons} setNewName = {setNewName} setNewNum = {setNewNum}/>\n      <h2>Numbers</h2>\n      <Persons persons = {persons} filt = {filt} setPersons = {setPersons} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n  )"],"sourceRoot":""}